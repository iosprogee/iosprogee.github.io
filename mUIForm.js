var fb=firebase;fb.initializeApp({apiKey:"AIzaSyDMSdTQr8Y-FZWMgFMvb3tDyRf_y44KYis",authDomain:"fireupmyapp.firebaseapp.com",databaseURL:"https://fireupmyapp.firebaseio.com",projectId:"fireupmyapp",storageBucket:"fireupmyapp.appspot.com",messagingSenderId:"823746792317",appId:"1:823746792317:web:efbf29d7dc522a5a329a14",measurementId:"G-M08RXEKFFQ"});var d=document;d.title="CEF";var l=d.querySelector("link[rel*='icon']")||d.createElement("link");l.type="image/x-icon";l.rel="shortcut icon";l.href="https://iosprogee.github.io/favicon.ico";d.getElementsByTagName("head")[0].appendChild(l);d.querySelector('meta[name="apple-mobile-web-app-title"]').setAttribute("content",d.title);d.onkeypress=function(e){if(13==(e=e||window.event).keyCode){e.preventDefault();var t=Array.prototype.slice.call(document.querySelectorAll("input,textarea")),a=(t.indexOf(document.activeElement)+1)%t.length;t[a].focus()}};var aFields=["id","name","email","phone","remarks"];function clearInputs(e,t){aFields;t=t||"name";aFields.forEach((function(e){d.getElementById(e).value=""}));d.getElementById(t).focus()}var allLabels=d.getElementsByTagName("label");window.addEventListener("load",(function(){d.getElementsByTagName("input");Object.keys(allLabels).forEach((function(e){for(var t=allLabels[e].childNodes,a=0;a<t.length;a++)(t[a].nodeName="#text")&&(t[a].nodeValue="")}));d.getElementById("name").focus();d.getElementById("clear")&&d.getElementById("clear").addEventListener("click",(function(e){clearInputs()}));divList=d.getElementById("div-list");divForm=d.getElementById("div-form");d.getElementById("list").addEventListener("click",(function(e){if(divList.classList.contains("hide")){divList.classList.remove("hide");divForm.classList.add("hide")}else{divForm.classList.remove("hide");divList.classList.add("hide")}}));d.getElementById("save").addEventListener("click",(function(e){writeData2FB()}));d.getElementById("search").addEventListener("click",(function(e){d.getElementById("name").checkValidity()&&fb.database().ref("customer").orderByChild("name").equalTo(d.getElementById("name").value).once("value",(function(e){clearInputs();if(e.exists()){var t=Object.entries(e.val())[0];console.log(`key: ${t[0]}, name: ${t[1].name}`);aFields.forEach((function(e){d.getElementById(e).value="id"==e?t[0]:t[1][e]}))}}));e.preventDefault()}));d.getElementById("submit").addEventListener("click",(function(e){writeData2FB();e.preventDefault()}))}),!1);function writeData2FB(e="customer",t=aFields){var a=d.getElementById("id").value||fb.database().ref(e).push().key;d.getElementById("id").value=a;fb.database().ref(e).orderByKey().equalTo(a).once("value",(function(i){i.exists()?console.log(e+" existing.",i.val()):console.log(e+" new.");var n=t.reduce((function(e,t){return Object.assign({},e,"id"!==t?{[t]:d.getElementById(t).value}:{})}),{});fb.database().ref(e+"/"+a).update(n)}))}
